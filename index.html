<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ================= META ================= -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyArch</title>

    <!-- ================= FAVICON ================= -->
    <link rel="icon" href="data:image/svg+xml,
        <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'>
            <text y='50' font-size='50'>ğŸ§</text>
        </svg>">

    <!-- ================= STYLE ================= -->
    <style>
        body {
            background-color: #1e1e1e;
            color: #e0e0e0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont,
                         "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            width: 100%;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
        }

        /* ===== Collapsible blocks ===== */
        details {
            background-color: #2c2c2c;
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        details[open] {
            transform: scale(1.01);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }

        summary {
            font-weight: bold;
            cursor: pointer;
            font-size: 1.2em;
        }

        h3 {
            margin-top: 15px;
            margin-bottom: 8px;
        }

        ul {
            margin-left: 20px;
        }

        a {
            color: #4ea3ff;
        }

        /* ===== Code blocks ===== */
        pre {
            background-color: #272727;
            padding: 12px;
            border-radius: 6px;
            font-family: monospace;
            white-space: pre-wrap;
            word-break: break-word;
            position: relative;
            margin: 10px 0;
        }

        pre:hover {
            background-color: #323232;
        }

        code {
            color: #f8f8f2;
        }

        /* ===== Copy button ===== */
        .copy-btn {
            position: absolute;
            top: 6px;
            right: 6px;
            background: none;
            color: #f8f8f2;
            border: none;
            cursor: pointer;
            font-size: 0.9em;
        }

        .copy-btn:hover {
            color: #4ea3ff;
        }
    </style>
</head>

<body>
<div class="container">

<!-- ================================================= -->
<!-- =================== HEADER ====================== -->
<!-- ================================================= -->
<h1>MyArch ğŸ§</h1>

<!-- ================================================= -->
<!-- ============ KERNEL BOOT SETTINGS =============== -->
<!-- ================================================= -->
<details>
<summary>ğŸ”§ Kernel Boot Settings</summary>

<h3>ğŸ§  CPU</h3>
<ul>
    <li><code>amd_pstate=active</code> â†’ fastest boost logic</li>
    <li><code>idle=nomwait</code> â†’ lowest latency</li>
    <li><code>mitigations=off</code> â†’ max performance</li>
</ul>

<h3>ğŸ® GPU</h3>
<ul>
    <li><code>amdgpu.ppfeaturemask=0xffffffff</code> â†’ unlock all RDNA2 states</li>
    <li><code>amdgpu.dpm=1</code> + <code>amdgpu.powerplay=1</code> â†’ max clocks</li>
    <li><code>transparent_hugepage=always</code> â†’ better memory throughput</li>
</ul>

<h3>âš™ï¸ System</h3>
<ul>
    <li><code>rootflags=noatime</code> â†’ reduced I/O</li>
    <li><code>zswap.enabled=0</code> â†’ zero latency</li>
</ul>

<pre>
<code>root=PARTUUID=9e4e2dad-478b-422b-841d-f7dab32b5a45 rw rootfstype=ext4 rootflags=noatime amd_pstate=active amdgpu.ppfeaturemask=0xffffffff amdgpu.dpm=1 amdgpu.powerplay=1 transparent_hugepage=always idle=nomwait mitigations=off zswap.enabled=0</code>
<button class="copy-btn" onclick="copyCode(this)">ğŸ“‹</button>
</pre>

</details>

<!-- ================================================= -->
<!-- ============ GPU PERFORMANCE ==================== -->
<!-- ================================================= -->
<details>
<summary>ğŸ® Best GPU Performance (RADV / Mesa)</summary>

<pre>
<code>sudo nano /etc/environment</code>
<button class="copy-btn" onclick="copyCode(this)">ğŸ“‹</button>
</pre>

<pre>
<code>RADV_PERFTEST=aco
RADV_DEBUG=nohiz
RADV_FORCE_VRS=1
RADV_SHADER_CACHE_SYNC=0
MESA_GLTHREAD=true</code>
<button class="copy-btn" onclick="copyCode(this)">ğŸ“‹</button>
</pre>

<pre>
<code>echo high | sudo tee /sys/class/drm/card0/device/power_dpm_force_performance_level</code>
<button class="copy-btn" onclick="copyCode(this)">ğŸ“‹</button>
</pre>

</details>

<!-- ================================================= -->
<!-- ============ PS5 AUDIO LOOPBACK ================= -->
<!-- ================================================= -->
<details>
<summary>ğŸ”Š PS5 Audio Loopback Script</summary>

<pre>
<code>#!/bin/bash
SOURCE="alsa_input.usb-0d8c_USB_Sound_Device-00.analog-stereo"
SINK="alsa_output.usb-Kingston_HyperX_Cloud_II_Wireless_000000000001-00.analog-stereo"

STATE_FILE="$HOME/.dp1_state"
LOOPBACK_FILE="$HOME/.loopback_module_id"

STATE=$(cat "$STATE_FILE" 2>/dev/null || echo enabled)

if [ "$STATE" = "enabled" ]; then
    kscreen-doctor output.DP-1.disable
    echo disabled > "$STATE_FILE"

    if [ ! -f "$LOOPBACK_FILE" ]; then
        pactl load-module module-loopback source="$SOURCE" sink="$SINK" latency_msec=10 > "$LOOPBACK_FILE"
    fi

    notify-send "DP-1 desligado" "Audio loopback ON"
else
    kscreen-doctor output.DP-1.enable output.DP-1.primary
    echo enabled > "$STATE_FILE"

    [ -f "$LOOPBACK_FILE" ] && pactl unload-module "$(cat "$LOOPBACK_FILE")" && rm "$LOOPBACK_FILE"

    notify-send "DP-1 ligado" "Audio loopback OFF"
fi</code>
<button class="copy-btn" onclick="copyCode(this)">ğŸ“‹</button>
</pre>

</details>

<!-- ================================================= -->
<!-- ============ KEYBOARD FIX ======================= -->
<!-- ================================================= -->
<details>
<summary>ğŸ¹ Keyboard Fix (Apple HID)</summary>

<pre>
<code>sudo nano /etc/modprobe.d/hid_apple.conf</code>
<button class="copy-btn" onclick="copyCode(this)">ğŸ“‹</button>
</pre>

<pre>
<code>options hid_apple fnmode=2</code>
<button class="copy-btn" onclick="copyCode(this)">ğŸ“‹</button>
</pre>

</details>

<!-- ================================================= -->
<!-- ============ THEMES ============================= -->
<!-- ================================================= -->
<details>
<summary>ğŸ¨ KDE Themes</summary>

<ul>
    <li>
        <a href="https://gitlab.com/pwyde/monochrome-kde" target="_blank">
            Monochrome KDE Theme
        </a>
    </li>
</ul>

</details>

</div>

<!-- ================================================= -->
<!-- ================= JAVASCRIPT ==================== -->
<!-- ================================================= -->
<script>
/* Copy code from the closest <pre><code> block */
function copyCode(button) {
    const pre = button.closest("pre");
    const code = pre.querySelector("code").textContent;

    navigator.clipboard.writeText(code).then(() => {
        const old = button.textContent;
        button.textContent = "âœ”ï¸";
        setTimeout(() => button.textContent = old, 1200);
    });
}
</script>

</body>
</html>
